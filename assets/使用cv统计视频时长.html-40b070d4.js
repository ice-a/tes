import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,e as t}from"./app-c13b3cb2.js";const p={},e=t(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> cv2<span class="token punctuation">,</span>os
<span class="token comment"># 统计视频</span>
<span class="token keyword">def</span> <span class="token function">count_video_duration</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    cap <span class="token operator">=</span> cv2<span class="token punctuation">.</span>VideoCapture<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>
    <span class="token keyword">if</span> cap<span class="token punctuation">.</span>isOpened<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 当成功打开视频时cap.isOpened()返回True,否则返回False</span>
        <span class="token comment"># get方法参数按顺序对应下表（从0开始编号)</span>
        rate <span class="token operator">=</span> cap<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment"># 帧速率</span>
        FrameNumber <span class="token operator">=</span> cap<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>  <span class="token comment"># 视频文件的帧数</span>
        duration <span class="token operator">=</span> FrameNumber <span class="token operator">/</span> rate
        <span class="token keyword">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span>duration<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">0</span>

<span class="token comment"># 递归获取视频路径进行统计时长</span>
<span class="token keyword">def</span> <span class="token function">count_video_duration_recursion</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">global</span> duration_video
    <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            count_video_duration_recursion<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> <span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> file_path<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">&#39;.mp4&#39;</span><span class="token punctuation">)</span> <span class="token keyword">or</span> file_path<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">&#39;.avi&#39;</span><span class="token punctuation">)</span><span class="token keyword">or</span> file_path<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">&#39;.3gp&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            duration <span class="token operator">=</span> count_video_duration<span class="token punctuation">(</span>file_path<span class="token punctuation">)</span>
            duration_video<span class="token operator">+=</span>duration
            <span class="token keyword">print</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> duration<span class="token punctuation">)</span>
duration_video <span class="token operator">=</span> <span class="token number">0</span>
path <span class="token operator">=</span> <span class="token string">&quot;路径&quot;</span>
count_video_duration_recursion<span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>duration_video<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),o=[e];function c(i,l){return s(),a("div",null,o)}const d=n(p,[["render",c],["__file","使用cv统计视频时长.html.vue"]]);export{d as default};
