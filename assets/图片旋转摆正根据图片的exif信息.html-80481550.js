const n=JSON.parse(`{"key":"v-4baace96","path":"/posts/python/%E5%9B%BE%E7%89%87%E6%97%8B%E8%BD%AC%E6%91%86%E6%AD%A3%E6%A0%B9%E6%8D%AE%E5%9B%BE%E7%89%87%E7%9A%84exif%E4%BF%A1%E6%81%AF.html","title":"图片旋转摆正根据图片的exif信息","lang":"zh-CN","frontmatter":{"title":"图片旋转摆正根据图片的exif信息","category":["python"],"tag":["python","图片","旋转","exif"],"description":"from PIL import Image import os # 图片旋转 def image_route(in_file, out_file): img = Image.open(in_file) dict_exif = img.getexif() try: res = dict_exif[274] if res == 1: img = img.rotate(0, expand=True) elif res == 8: print(\\"向右\\", in_file) img = img.rotate(90, expand=True) elif res == 6: print(\\"向左\\", in_file) img = img.rotate(-90, expand=True) elif res == 3: print(\\"翻转\\", in_file) img = img.rotate(180, expand=True) else: print(res, \\"不正常\\", in_file) img = img.rotate(0, expand=True) img.save(out_file) except: print(\\"error:\\", in_file) img = img.rotate(0, expand=True) img.save(os.path.join(_save, i)) if __name__ == '__main__': # 要调整的路径 path = r\\"文件路径\\" # 调整之后保存的路径 _save = r\\"文件路径\\" for i in os.listdir(path): in_file = os.path.join(path, i) out_file = os.path.join(_save, i) image_route(in_file, out_file)","head":[["meta",{"property":"og:url","content":"https://lideshan.top/posts/python/%E5%9B%BE%E7%89%87%E6%97%8B%E8%BD%AC%E6%91%86%E6%AD%A3%E6%A0%B9%E6%8D%AE%E5%9B%BE%E7%89%87%E7%9A%84exif%E4%BF%A1%E6%81%AF.html"}],["meta",{"property":"og:site_name","content":"木子"}],["meta",{"property":"og:title","content":"图片旋转摆正根据图片的exif信息"}],["meta",{"property":"og:description","content":"from PIL import Image import os # 图片旋转 def image_route(in_file, out_file): img = Image.open(in_file) dict_exif = img.getexif() try: res = dict_exif[274] if res == 1: img = img.rotate(0, expand=True) elif res == 8: print(\\"向右\\", in_file) img = img.rotate(90, expand=True) elif res == 6: print(\\"向左\\", in_file) img = img.rotate(-90, expand=True) elif res == 3: print(\\"翻转\\", in_file) img = img.rotate(180, expand=True) else: print(res, \\"不正常\\", in_file) img = img.rotate(0, expand=True) img.save(out_file) except: print(\\"error:\\", in_file) img = img.rotate(0, expand=True) img.save(os.path.join(_save, i)) if __name__ == '__main__': # 要调整的路径 path = r\\"文件路径\\" # 调整之后保存的路径 _save = r\\"文件路径\\" for i in os.listdir(path): in_file = os.path.join(path, i) out_file = os.path.join(_save, i) image_route(in_file, out_file)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-31T11:11:28.000Z"}],["meta",{"property":"article:author","content":"爱喝水的木子"}],["meta",{"property":"article:tag","content":"python"}],["meta",{"property":"article:tag","content":"图片"}],["meta",{"property":"article:tag","content":"旋转"}],["meta",{"property":"article:tag","content":"exif"}],["meta",{"property":"article:modified_time","content":"2023-08-31T11:11:28.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"图片旋转摆正根据图片的exif信息\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-31T11:11:28.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"爱喝水的木子\\",\\"url\\":\\"https://lideshan.top\\",\\"email\\":\\"muzi@lideshan.cn\\"}]}"]]},"headers":[],"git":{"createdTime":1693480288000,"updatedTime":1693480288000,"contributors":[{"name":"爱喝水的木子","email":"50564847+ice-a@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":0.55,"words":165},"filePathRelative":"posts/python/图片旋转摆正根据图片的exif信息.md","localizedDate":"2023年8月31日","excerpt":"<div class=\\"language-python line-numbers-mode\\" data-ext=\\"py\\"><pre class=\\"language-python\\"><code><span class=\\"token keyword\\">from</span> PIL <span class=\\"token keyword\\">import</span> Image\\n<span class=\\"token keyword\\">import</span> os\\n\\n\\n<span class=\\"token comment\\"># 图片旋转</span>\\n<span class=\\"token keyword\\">def</span> <span class=\\"token function\\">image_route</span><span class=\\"token punctuation\\">(</span>in_file<span class=\\"token punctuation\\">,</span> out_file<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    img <span class=\\"token operator\\">=</span> Image<span class=\\"token punctuation\\">.</span><span class=\\"token builtin\\">open</span><span class=\\"token punctuation\\">(</span>in_file<span class=\\"token punctuation\\">)</span>\\n    dict_exif <span class=\\"token operator\\">=</span> img<span class=\\"token punctuation\\">.</span>getexif<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">try</span><span class=\\"token punctuation\\">:</span>\\n        res <span class=\\"token operator\\">=</span> dict_exif<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">274</span><span class=\\"token punctuation\\">]</span>\\n        <span class=\\"token keyword\\">if</span> res <span class=\\"token operator\\">==</span> <span class=\\"token number\\">1</span><span class=\\"token punctuation\\">:</span>\\n            img <span class=\\"token operator\\">=</span> img<span class=\\"token punctuation\\">.</span>rotate<span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> expand<span class=\\"token operator\\">=</span><span class=\\"token boolean\\">True</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">elif</span> res <span class=\\"token operator\\">==</span> <span class=\\"token number\\">8</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"向右\\"</span><span class=\\"token punctuation\\">,</span> in_file<span class=\\"token punctuation\\">)</span>\\n            img <span class=\\"token operator\\">=</span> img<span class=\\"token punctuation\\">.</span>rotate<span class=\\"token punctuation\\">(</span><span class=\\"token number\\">90</span><span class=\\"token punctuation\\">,</span> expand<span class=\\"token operator\\">=</span><span class=\\"token boolean\\">True</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">elif</span> res <span class=\\"token operator\\">==</span> <span class=\\"token number\\">6</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"向左\\"</span><span class=\\"token punctuation\\">,</span> in_file<span class=\\"token punctuation\\">)</span>\\n            img <span class=\\"token operator\\">=</span> img<span class=\\"token punctuation\\">.</span>rotate<span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">-</span><span class=\\"token number\\">90</span><span class=\\"token punctuation\\">,</span> expand<span class=\\"token operator\\">=</span><span class=\\"token boolean\\">True</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">elif</span> res <span class=\\"token operator\\">==</span> <span class=\\"token number\\">3</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"翻转\\"</span><span class=\\"token punctuation\\">,</span> in_file<span class=\\"token punctuation\\">)</span>\\n            img <span class=\\"token operator\\">=</span> img<span class=\\"token punctuation\\">.</span>rotate<span class=\\"token punctuation\\">(</span><span class=\\"token number\\">180</span><span class=\\"token punctuation\\">,</span> expand<span class=\\"token operator\\">=</span><span class=\\"token boolean\\">True</span><span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">:</span>\\n            <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span>res<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"不正常\\"</span><span class=\\"token punctuation\\">,</span> in_file<span class=\\"token punctuation\\">)</span>\\n            img <span class=\\"token operator\\">=</span> img<span class=\\"token punctuation\\">.</span>rotate<span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> expand<span class=\\"token operator\\">=</span><span class=\\"token boolean\\">True</span><span class=\\"token punctuation\\">)</span>\\n        img<span class=\\"token punctuation\\">.</span>save<span class=\\"token punctuation\\">(</span>out_file<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">except</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"error:\\"</span><span class=\\"token punctuation\\">,</span> in_file<span class=\\"token punctuation\\">)</span>\\n        img <span class=\\"token operator\\">=</span> img<span class=\\"token punctuation\\">.</span>rotate<span class=\\"token punctuation\\">(</span><span class=\\"token number\\">0</span><span class=\\"token punctuation\\">,</span> expand<span class=\\"token operator\\">=</span><span class=\\"token boolean\\">True</span><span class=\\"token punctuation\\">)</span>\\n        img<span class=\\"token punctuation\\">.</span>save<span class=\\"token punctuation\\">(</span>os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>join<span class=\\"token punctuation\\">(</span>_save<span class=\\"token punctuation\\">,</span> i<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n\\n\\n<span class=\\"token keyword\\">if</span> __name__ <span class=\\"token operator\\">==</span> <span class=\\"token string\\">'__main__'</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token comment\\"># 要调整的路径</span>\\n    path <span class=\\"token operator\\">=</span> <span class=\\"token string\\">r\\"文件路径\\"</span>\\n    <span class=\\"token comment\\"># 调整之后保存的路径</span>\\n    _save <span class=\\"token operator\\">=</span> <span class=\\"token string\\">r\\"文件路径\\"</span>\\n    <span class=\\"token keyword\\">for</span> i <span class=\\"token keyword\\">in</span> os<span class=\\"token punctuation\\">.</span>listdir<span class=\\"token punctuation\\">(</span>path<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n        in_file <span class=\\"token operator\\">=</span> os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>join<span class=\\"token punctuation\\">(</span>path<span class=\\"token punctuation\\">,</span> i<span class=\\"token punctuation\\">)</span>\\n        out_file <span class=\\"token operator\\">=</span> os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>join<span class=\\"token punctuation\\">(</span>_save<span class=\\"token punctuation\\">,</span> i<span class=\\"token punctuation\\">)</span>\\n        image_route<span class=\\"token punctuation\\">(</span>in_file<span class=\\"token punctuation\\">,</span> out_file<span class=\\"token punctuation\\">)</span>\\n\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"爱喝水的木子"},"autoDesc":true}`);export{n as data};
