const n=JSON.parse(`{"key":"v-d94f247c","path":"/posts/server/steam_%E5%96%9C%E5%8A%A0%E4%B8%80.html","title":"steam获取喜加一","lang":"zh-CN","frontmatter":{"title":"steam获取喜加一","category":["server"],"tag":["server","python"],"description":"获取喜加一 import requests from bs4 import BeautifulSoup #Server酱推送模块，PUSH_KEY替换自己的 def send_message_fangtang(_item,_message): PUSH_KEY = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' # api = 'https://sctapi.ftqq.com/' + PUSH_KEY + '.send' _d = { \\"title\\": _item, \\"desp\\": _message } req = requests.post(api,data = _d) #print(req.text) #爬取代码 url='https://steamstats.cn/xi' headers={'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.41'} r=requests.get(url,headers=headers) r.raise_for_status() r.encoding = r.apparent_encoding soup = BeautifulSoup(r.text, \\"html.parser\\") tbody=soup.find('tbody') tr=tbody.find_all('tr') i=1 #desp=\\"今日喜加一\\"+'\\\\n' for tr in tr: td=tr.find_all('td') name=td[1].string.strip().replace('\\\\n', '').replace('\\\\r', '') gametype=td[2].string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') start=td[3].string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') end=td[4].string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') time=td[5].string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') oringin=td[6].find('span').string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') sp=str(td[6]).split('\\"') http=sp[3] desp=\\"序号：\\"+str(i)+'\\\\n\\\\r'+\\"游戏名称：\\"+name+'\\\\n\\\\r'+\\"类型：\\"+gametype+'\\\\n\\\\r'+\\"开始时间：\\"+start+'\\\\n\\\\r'+\\"结束时间：\\"+end+'\\\\n\\\\r'+\\"是否永久：\\"+time+'\\\\n\\\\r'+\\"平台：\\"+oringin+'\\\\n\\\\r'+\\"链接：\\"+http+'\\\\n\\\\r' #推送 send_message_fangtang(\\"今日喜加一\\",desp) #print(desp)","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/posts/server/steam_%E5%96%9C%E5%8A%A0%E4%B8%80.html"}],["meta",{"property":"og:site_name","content":"博客演示"}],["meta",{"property":"og:title","content":"steam获取喜加一"}],["meta",{"property":"og:description","content":"获取喜加一 import requests from bs4 import BeautifulSoup #Server酱推送模块，PUSH_KEY替换自己的 def send_message_fangtang(_item,_message): PUSH_KEY = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' # api = 'https://sctapi.ftqq.com/' + PUSH_KEY + '.send' _d = { \\"title\\": _item, \\"desp\\": _message } req = requests.post(api,data = _d) #print(req.text) #爬取代码 url='https://steamstats.cn/xi' headers={'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.41'} r=requests.get(url,headers=headers) r.raise_for_status() r.encoding = r.apparent_encoding soup = BeautifulSoup(r.text, \\"html.parser\\") tbody=soup.find('tbody') tr=tbody.find_all('tr') i=1 #desp=\\"今日喜加一\\"+'\\\\n' for tr in tr: td=tr.find_all('td') name=td[1].string.strip().replace('\\\\n', '').replace('\\\\r', '') gametype=td[2].string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') start=td[3].string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') end=td[4].string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') time=td[5].string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') oringin=td[6].find('span').string.replace(\\" \\",\\"\\").replace('\\\\n', '').replace('\\\\r', '') sp=str(td[6]).split('\\"') http=sp[3] desp=\\"序号：\\"+str(i)+'\\\\n\\\\r'+\\"游戏名称：\\"+name+'\\\\n\\\\r'+\\"类型：\\"+gametype+'\\\\n\\\\r'+\\"开始时间：\\"+start+'\\\\n\\\\r'+\\"结束时间：\\"+end+'\\\\n\\\\r'+\\"是否永久：\\"+time+'\\\\n\\\\r'+\\"平台：\\"+oringin+'\\\\n\\\\r'+\\"链接：\\"+http+'\\\\n\\\\r' #推送 send_message_fangtang(\\"今日喜加一\\",desp) #print(desp)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-09-05T02:25:35.000Z"}],["meta",{"property":"article:author","content":"爱喝水的木子"}],["meta",{"property":"article:tag","content":"server"}],["meta",{"property":"article:tag","content":"python"}],["meta",{"property":"article:modified_time","content":"2023-09-05T02:25:35.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"steam获取喜加一\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-09-05T02:25:35.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"爱喝水的木子\\",\\"url\\":\\"https://lideshan.cn\\",\\"email\\":\\"muzi@lideshan.cn\\"}]}"]]},"headers":[{"level":2,"title":"获取喜加一","slug":"获取喜加一","link":"#获取喜加一","children":[]},{"level":2,"title":"Github Ations，new workflows新建main.yml","slug":"github-ations-new-workflows新建main-yml","link":"#github-ations-new-workflows新建main-yml","children":[]},{"level":2,"title":"复制第一步的happy_plus_one.py文件到Github","slug":"复制第一步的happy-plus-one-py文件到github","link":"#复制第一步的happy-plus-one-py文件到github","children":[]}],"git":{"createdTime":1693880735000,"updatedTime":1693880735000,"contributors":[{"name":"爱喝水的木子","email":"50564847+ice-a@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":1.13,"words":339},"filePathRelative":"posts/server/steam_喜加一.md","localizedDate":"2023年9月5日","excerpt":"<h2> 获取喜加一</h2>\\n<div class=\\"language-python line-numbers-mode\\" data-ext=\\"py\\"><pre class=\\"language-python\\"><code><span class=\\"token keyword\\">import</span> requests\\n<span class=\\"token keyword\\">from</span> bs4 <span class=\\"token keyword\\">import</span> BeautifulSoup\\n \\n<span class=\\"token comment\\">#Server酱推送模块，PUSH_KEY替换自己的</span>\\n<span class=\\"token keyword\\">def</span> <span class=\\"token function\\">send_message_fangtang</span><span class=\\"token punctuation\\">(</span>_item<span class=\\"token punctuation\\">,</span>_message<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n        PUSH_KEY <span class=\\"token operator\\">=</span> <span class=\\"token string\\">'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span>  <span class=\\"token comment\\">#</span>\\n        api <span class=\\"token operator\\">=</span> <span class=\\"token string\\">'https://sctapi.ftqq.com/'</span> <span class=\\"token operator\\">+</span> PUSH_KEY <span class=\\"token operator\\">+</span> <span class=\\"token string\\">'.send'</span>\\n        _d <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token string\\">\\"title\\"</span><span class=\\"token punctuation\\">:</span> _item<span class=\\"token punctuation\\">,</span>\\n                <span class=\\"token string\\">\\"desp\\"</span><span class=\\"token punctuation\\">:</span> _message\\n                <span class=\\"token punctuation\\">}</span>\\n        req <span class=\\"token operator\\">=</span> requests<span class=\\"token punctuation\\">.</span>post<span class=\\"token punctuation\\">(</span>api<span class=\\"token punctuation\\">,</span>data <span class=\\"token operator\\">=</span> _d<span class=\\"token punctuation\\">)</span>\\n        <span class=\\"token comment\\">#print(req.text)</span>\\n \\n<span class=\\"token comment\\">#爬取代码</span>\\nurl<span class=\\"token operator\\">=</span><span class=\\"token string\\">'https://steamstats.cn/xi'</span>\\nheaders<span class=\\"token operator\\">=</span><span class=\\"token punctuation\\">{</span><span class=\\"token string\\">'User-Agent'</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.72 Safari/537.36 Edg/90.0.818.41'</span><span class=\\"token punctuation\\">}</span>\\n \\nr<span class=\\"token operator\\">=</span>requests<span class=\\"token punctuation\\">.</span>get<span class=\\"token punctuation\\">(</span>url<span class=\\"token punctuation\\">,</span>headers<span class=\\"token operator\\">=</span>headers<span class=\\"token punctuation\\">)</span>\\nr<span class=\\"token punctuation\\">.</span>raise_for_status<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span>\\nr<span class=\\"token punctuation\\">.</span>encoding <span class=\\"token operator\\">=</span> r<span class=\\"token punctuation\\">.</span>apparent_encoding\\nsoup <span class=\\"token operator\\">=</span> BeautifulSoup<span class=\\"token punctuation\\">(</span>r<span class=\\"token punctuation\\">.</span>text<span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"html.parser\\"</span><span class=\\"token punctuation\\">)</span>\\ntbody<span class=\\"token operator\\">=</span>soup<span class=\\"token punctuation\\">.</span>find<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'tbody'</span><span class=\\"token punctuation\\">)</span>\\ntr<span class=\\"token operator\\">=</span>tbody<span class=\\"token punctuation\\">.</span>find_all<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'tr'</span><span class=\\"token punctuation\\">)</span>\\ni<span class=\\"token operator\\">=</span><span class=\\"token number\\">1</span>\\n<span class=\\"token comment\\">#desp=\\"今日喜加一\\"+'\\\\n'</span>\\n<span class=\\"token keyword\\">for</span> tr <span class=\\"token keyword\\">in</span> tr<span class=\\"token punctuation\\">:</span>\\n        td<span class=\\"token operator\\">=</span>tr<span class=\\"token punctuation\\">.</span>find_all<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'td'</span><span class=\\"token punctuation\\">)</span>\\n        name<span class=\\"token operator\\">=</span>td<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">1</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">.</span>strip<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\n'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\r'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span>\\n        gametype<span class=\\"token operator\\">=</span>td<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">2</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\" \\"</span><span class=\\"token punctuation\\">,</span><span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\n'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\r'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span>\\n        start<span class=\\"token operator\\">=</span>td<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">3</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\" \\"</span><span class=\\"token punctuation\\">,</span><span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\n'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\r'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span>\\n        end<span class=\\"token operator\\">=</span>td<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">4</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\" \\"</span><span class=\\"token punctuation\\">,</span><span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\n'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\r'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span>\\n        time<span class=\\"token operator\\">=</span>td<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">5</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\" \\"</span><span class=\\"token punctuation\\">,</span><span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\n'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\r'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span>\\n        oringin<span class=\\"token operator\\">=</span>td<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">6</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">.</span>find<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'span'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>string<span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\" \\"</span><span class=\\"token punctuation\\">,</span><span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\n'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>replace<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\\\r'</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">''</span><span class=\\"token punctuation\\">)</span>\\n         \\n        sp<span class=\\"token operator\\">=</span><span class=\\"token builtin\\">str</span><span class=\\"token punctuation\\">(</span>td<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">6</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span>split<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'\\"'</span><span class=\\"token punctuation\\">)</span>\\n        http<span class=\\"token operator\\">=</span>sp<span class=\\"token punctuation\\">[</span><span class=\\"token number\\">3</span><span class=\\"token punctuation\\">]</span>\\n        desp<span class=\\"token operator\\">=</span><span class=\\"token string\\">\\"序号：\\"</span><span class=\\"token operator\\">+</span><span class=\\"token builtin\\">str</span><span class=\\"token punctuation\\">(</span>i<span class=\\"token punctuation\\">)</span><span class=\\"token operator\\">+</span><span class=\\"token string\\">'\\\\n\\\\r'</span><span class=\\"token operator\\">+</span><span class=\\"token string\\">\\"游戏名称：\\"</span><span class=\\"token operator\\">+</span>name<span class=\\"token operator\\">+</span><span class=\\"token string\\">'\\\\n\\\\r'</span><span class=\\"token operator\\">+</span><span class=\\"token string\\">\\"类型：\\"</span><span class=\\"token operator\\">+</span>gametype<span class=\\"token operator\\">+</span><span class=\\"token string\\">'\\\\n\\\\r'</span><span class=\\"token operator\\">+</span><span class=\\"token string\\">\\"开始时间：\\"</span><span class=\\"token operator\\">+</span>start<span class=\\"token operator\\">+</span><span class=\\"token string\\">'\\\\n\\\\r'</span><span class=\\"token operator\\">+</span><span class=\\"token string\\">\\"结束时间：\\"</span><span class=\\"token operator\\">+</span>end<span class=\\"token operator\\">+</span><span class=\\"token string\\">'\\\\n\\\\r'</span><span class=\\"token operator\\">+</span><span class=\\"token string\\">\\"是否永久：\\"</span><span class=\\"token operator\\">+</span>time<span class=\\"token operator\\">+</span><span class=\\"token string\\">'\\\\n\\\\r'</span><span class=\\"token operator\\">+</span><span class=\\"token string\\">\\"平台：\\"</span><span class=\\"token operator\\">+</span>oringin<span class=\\"token operator\\">+</span><span class=\\"token string\\">'\\\\n\\\\r'</span><span class=\\"token operator\\">+</span><span class=\\"token string\\">\\"链接：\\"</span><span class=\\"token operator\\">+</span>http<span class=\\"token operator\\">+</span><span class=\\"token string\\">'\\\\n\\\\r'</span>\\n \\n<span class=\\"token comment\\">#推送</span>\\nsend_message_fangtang<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"今日喜加一\\"</span><span class=\\"token punctuation\\">,</span>desp<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token comment\\">#print(desp)        </span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"爱喝水的木子"},"autoDesc":true}`);export{n as data};
