const n=JSON.parse(`{"key":"v-ec71f4d4","path":"/posts/python/%E4%BD%BF%E7%94%A8cv%E7%BB%9F%E8%AE%A1%E8%A7%86%E9%A2%91%E6%97%B6%E9%95%BF.html","title":"使用cv统计视频时长","lang":"zh-CN","frontmatter":{"title":"使用cv统计视频时长","category":["python"],"tag":["python","cv","文件","视频"],"description":"import cv2,os # 统计视频 def count_video_duration(file_path): cap = cv2.VideoCapture(file_path) if cap.isOpened(): # 当成功打开视频时cap.isOpened()返回True,否则返回False # get方法参数按顺序对应下表（从0开始编号) rate = cap.get(5) # 帧速率 FrameNumber = cap.get(7) # 视频文件的帧数 duration = FrameNumber / rate return int(duration) else: return 0 # 递归获取视频路径进行统计时长 def count_video_duration_recursion(file_path): global duration_video if os.path.isdir(file_path): for file in os.listdir(file_path): count_video_duration_recursion(os.path.join(file_path, file)) else: if file_path.endswith('.mp4') or file_path.endswith('.avi')or file_path.endswith('.3gp'): duration = count_video_duration(file_path) duration_video+=duration print(file_path, duration) duration_video = 0 path = \\"路径\\" count_video_duration_recursion(path) print(duration_video)","head":[["meta",{"property":"og:url","content":"https://lideshan.top/posts/python/%E4%BD%BF%E7%94%A8cv%E7%BB%9F%E8%AE%A1%E8%A7%86%E9%A2%91%E6%97%B6%E9%95%BF.html"}],["meta",{"property":"og:site_name","content":"木子"}],["meta",{"property":"og:title","content":"使用cv统计视频时长"}],["meta",{"property":"og:description","content":"import cv2,os # 统计视频 def count_video_duration(file_path): cap = cv2.VideoCapture(file_path) if cap.isOpened(): # 当成功打开视频时cap.isOpened()返回True,否则返回False # get方法参数按顺序对应下表（从0开始编号) rate = cap.get(5) # 帧速率 FrameNumber = cap.get(7) # 视频文件的帧数 duration = FrameNumber / rate return int(duration) else: return 0 # 递归获取视频路径进行统计时长 def count_video_duration_recursion(file_path): global duration_video if os.path.isdir(file_path): for file in os.listdir(file_path): count_video_duration_recursion(os.path.join(file_path, file)) else: if file_path.endswith('.mp4') or file_path.endswith('.avi')or file_path.endswith('.3gp'): duration = count_video_duration(file_path) duration_video+=duration print(file_path, duration) duration_video = 0 path = \\"路径\\" count_video_duration_recursion(path) print(duration_video)"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-31T11:11:28.000Z"}],["meta",{"property":"article:author","content":"爱喝水的木子"}],["meta",{"property":"article:tag","content":"python"}],["meta",{"property":"article:tag","content":"cv"}],["meta",{"property":"article:tag","content":"文件"}],["meta",{"property":"article:tag","content":"视频"}],["meta",{"property":"article:modified_time","content":"2023-08-31T11:11:28.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"使用cv统计视频时长\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-31T11:11:28.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"爱喝水的木子\\",\\"url\\":\\"https://lideshan.top\\",\\"email\\":\\"muzi@lideshan.cn\\"}]}"]]},"headers":[],"git":{"createdTime":1693480288000,"updatedTime":1693480288000,"contributors":[{"name":"爱喝水的木子","email":"50564847+ice-a@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":0.51,"words":154},"filePathRelative":"posts/python/使用cv统计视频时长.md","localizedDate":"2023年8月31日","excerpt":"<div class=\\"language-python line-numbers-mode\\" data-ext=\\"py\\"><pre class=\\"language-python\\"><code><span class=\\"token keyword\\">import</span> cv2<span class=\\"token punctuation\\">,</span>os\\n<span class=\\"token comment\\"># 统计视频</span>\\n<span class=\\"token keyword\\">def</span> <span class=\\"token function\\">count_video_duration</span><span class=\\"token punctuation\\">(</span>file_path<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    cap <span class=\\"token operator\\">=</span> cv2<span class=\\"token punctuation\\">.</span>VideoCapture<span class=\\"token punctuation\\">(</span>file_path<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">if</span> cap<span class=\\"token punctuation\\">.</span>isOpened<span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>  <span class=\\"token comment\\"># 当成功打开视频时cap.isOpened()返回True,否则返回False</span>\\n        <span class=\\"token comment\\"># get方法参数按顺序对应下表（从0开始编号)</span>\\n        rate <span class=\\"token operator\\">=</span> cap<span class=\\"token punctuation\\">.</span>get<span class=\\"token punctuation\\">(</span><span class=\\"token number\\">5</span><span class=\\"token punctuation\\">)</span>  <span class=\\"token comment\\"># 帧速率</span>\\n        FrameNumber <span class=\\"token operator\\">=</span> cap<span class=\\"token punctuation\\">.</span>get<span class=\\"token punctuation\\">(</span><span class=\\"token number\\">7</span><span class=\\"token punctuation\\">)</span>  <span class=\\"token comment\\"># 视频文件的帧数</span>\\n        duration <span class=\\"token operator\\">=</span> FrameNumber <span class=\\"token operator\\">/</span> rate\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token builtin\\">int</span><span class=\\"token punctuation\\">(</span>duration<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token number\\">0</span>\\n\\n<span class=\\"token comment\\"># 递归获取视频路径进行统计时长</span>\\n<span class=\\"token keyword\\">def</span> <span class=\\"token function\\">count_video_duration_recursion</span><span class=\\"token punctuation\\">(</span>file_path<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token keyword\\">global</span> duration_video\\n    <span class=\\"token keyword\\">if</span> os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>isdir<span class=\\"token punctuation\\">(</span>file_path<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token keyword\\">for</span> <span class=\\"token builtin\\">file</span> <span class=\\"token keyword\\">in</span> os<span class=\\"token punctuation\\">.</span>listdir<span class=\\"token punctuation\\">(</span>file_path<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n            count_video_duration_recursion<span class=\\"token punctuation\\">(</span>os<span class=\\"token punctuation\\">.</span>path<span class=\\"token punctuation\\">.</span>join<span class=\\"token punctuation\\">(</span>file_path<span class=\\"token punctuation\\">,</span> <span class=\\"token builtin\\">file</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token keyword\\">else</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token keyword\\">if</span> file_path<span class=\\"token punctuation\\">.</span>endswith<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'.mp4'</span><span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">or</span> file_path<span class=\\"token punctuation\\">.</span>endswith<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'.avi'</span><span class=\\"token punctuation\\">)</span><span class=\\"token keyword\\">or</span> file_path<span class=\\"token punctuation\\">.</span>endswith<span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'.3gp'</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">:</span>\\n            duration <span class=\\"token operator\\">=</span> count_video_duration<span class=\\"token punctuation\\">(</span>file_path<span class=\\"token punctuation\\">)</span>\\n            duration_video<span class=\\"token operator\\">+=</span>duration\\n            <span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span>file_path<span class=\\"token punctuation\\">,</span> duration<span class=\\"token punctuation\\">)</span>\\nduration_video <span class=\\"token operator\\">=</span> <span class=\\"token number\\">0</span>\\npath <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"路径\\"</span>\\ncount_video_duration_recursion<span class=\\"token punctuation\\">(</span>path<span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">print</span><span class=\\"token punctuation\\">(</span>duration_video<span class=\\"token punctuation\\">)</span>\\n\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"爱喝水的木子"},"autoDesc":true}`);export{n as data};
